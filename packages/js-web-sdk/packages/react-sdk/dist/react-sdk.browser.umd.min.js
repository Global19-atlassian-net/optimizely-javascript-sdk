!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(require("react")):"function"==typeof define&&define.amd?define(["react"],e):e((t=t||self).React)}(this,function(o){"use strict";var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function i(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var p=function(){return(p=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},t=(0,require("react-broadcast").createContext)({optimizely:null,timeout:0}),e=t.Consumer,n=t.Provider,a=e,u=n,l=function(r){function t(t){var e=r.call(this,t)||this,n=(t.timeout,t.optimizely);return e.sdkWrapper=n,e}return i(t,r),t.prototype.render=function(){var t=this.props,e=t.children,n=t.timeout,r={optimizely:this.sdkWrapper,timeout:n};return o.createElement(u,{value:r},e)},t.defaultProps={timeout:0},t}(o.Component);function s(n){return function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.render=function(){var e=this;return o.createElement(a,null,function(t){return o.createElement(n,p({},e.props,{optimizely:t.optimizely,optimizelyReadyTimeout:t.optimizelyReadyTimeout}))})},e}(o.Component)}var c=s(function(n){function t(t){var e=n.call(this,t)||this;return e.state={canRender:!1,isEnabled:!1,variables:{}},e}return i(t,n),t.prototype.componentDidMount=function(){var n=this,t=this.props,r=t.feature,o=t.optimizely,e=t.optimizelyReadyTimeout;if(null===o)throw new Error("optimizely prop must be supplied");o.onReady({timeout:e}).then(function(){var t=o.isFeatureEnabled(r),e=o.getFeatureVariables(r);n.setState({canRender:!0,isEnabled:t,variables:e})})},t.prototype.render=function(){var t=this.props.children,e=this.state,n=e.isEnabled,r=e.variables;return e.canRender?t(n,r):null},t}(o.Component)),f=s(function(n){function t(t){var e=n.call(this,t)||this;return e.state={canRender:!1,variation:null},e}return i(t,n),t.prototype.componentDidMount=function(){var e=this,t=this.props,n=t.experiment,r=t.optimizely,o=t.optimizelyReadyTimeout;if(null===r)throw new Error("optimizely prop must be supplied");r.onReady({timeout:o}).then(function(){var t=r.activate(n);e.setState({canRender:!0,variation:t})})},t.prototype.render=function(){var t=this.props.children,e=this.state,n=e.variation;if(!e.canRender)return null;if(null!=t&&"function"==typeof t)return t(n);var r=null;return o.Children.forEach(this.props.children,function(t){!r&&o.isValidElement(t)?(console.log("child props",t.props),t.props.variation?(console.log("child variation",t.props.variation),n===t.props.variation&&(r=t)):t.props.default&&(console.log("child default",t.props.default),r=t)):console.log("found",r,!o.isValidElement(t))}),r?o.cloneElement(r,{variation:n}):null},t}(o.Component)),d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.render=function(){return this.props.children},e}(o.Component),m=Object.freeze({OptimizelyProvider:l,OptimizelyFeature:c,withOptimizely:s,OptimizelyExperiment:f,OptimizelyVariation:d});module.exports=m});
